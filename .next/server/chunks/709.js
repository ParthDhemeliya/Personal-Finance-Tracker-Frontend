exports.id=709,exports.ids=[709],exports.modules={31955:(e,t,r)=>{Promise.resolve().then(r.bind(r,59120))},55515:(e,t,r)=>{Promise.resolve().then(r.bind(r,63144))},59120:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>S});var s=r(60687),o=r(92477),a=r.n(o),n=r(43210),l=r(85814),i=r.n(l),d=r(16189);let c=({onLogout:e,onClose:t,user:r})=>{let o=(0,n.useRef)(null);return(0,s.jsxs)("div",{ref:o,className:"fixed right-0 mt-2 w-64  bg-blue-50 shadow-lg rounded-lg z-50 p-4",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-3 mb-4",children:[(0,s.jsx)("img",{className:"w-12 h-12 rounded-full",src:r?.profile||"https://flowbite.com/docs/images/people/profile-picture-5.jpg",alt:"User"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm font-semibold text-blue-900",children:r?.name||"Neil Sims"}),(0,s.jsx)("p",{className:"text-xs font-semibold text-blue-900",children:r?.email||"neil@example.com"})]})]}),(0,s.jsxs)("div",{className:"flex justify-between space-x-2",children:[(0,s.jsx)("button",{onClick:e,className:"flex-1 py-1 text-sm bg-red-100 text-red-800 hover:bg-red-200 rounded-md hover:text-red-900 transition cursor-pointer font-semibold",children:"Logout"}),(0,s.jsx)("button",{onClick:t,className:"flex-1 py-1 text-sm bg-gray-200 hover:bg-gray-300 dark:bg-gray-700 dark:hover:bg-gray-600 text-gray-800 dark:text-white rounded-md",children:"Cancel"})]})]})};var u=r(23928),m=r(78272),x=r(14952),p=r(80224),h=r(92531);let b=({currentPath:e,onNavigate:t})=>{let r=t=>e===t,o={gray:{active:"bg-white text-blue-900 font-bold border border-blue-100",hover:"hover:bg-white hover:text-blue-900"},blue:{active:"bg-blue-100 text-blue-800 font-bold border border-blue-200",hover:"hover:bg-blue-100 hover:text-blue-800"},red:{active:"bg-red-100 text-red-800 font-bold border border-red-200",hover:"hover:bg-red-100 hover:text-red-800"}};return(0,s.jsx)(s.Fragment,{children:[{label:"Dashboard",path:"/dashboard",color:"gray"},{label:"Income",path:"/dashboard/income",color:"blue"},{label:"Expense",path:"/dashboard/expense",color:"red"}].map(({label:e,path:a,color:n})=>{let l=r(a),d=o[n];return(0,s.jsx)(i(),{href:a,onClick:t,className:`block px-4 py-2 rounded-lg text-sm font-medium transition-all ${l?d.active+" scale-105 ring-2 ring-blue-200/40":`text-blue-900 ${d.hover}`}`,children:e},e)})})};var g=r(88920),f=r(26001),y=r(81047),j=r(67074);let v=()=>{let e=(0,h.j)(),t=(0,d.usePathname)(),r=(0,d.useRouter)(),o=(0,n.useRef)(null),{showSuccess:a}=(0,j.A)(),[l,v]=(0,n.useState)(!1),[N,w]=(0,n.useState)(!0),[S,C]=(0,n.useState)(!1),k=(0,p.G)(e=>e.auth.user),A=k?.first_name,I=`${k?.first_name??""} ${k?.last_name??""}`;return(0,n.useEffect)(()=>{let e=e=>{o.current&&!o.current.contains(e.target)&&v(!1)};return l&&document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[l]),(0,s.jsxs)("div",{children:[(0,s.jsx)("nav",{className:"fixed top-0 left-0 w-full z-50 bg-blue-50 border-b border-blue-100/80",children:(0,s.jsxs)("div",{className:"h-14 px-6 flex items-center justify-between",children:[(0,s.jsx)("button",{className:"sm:hidden text-blue-800",onClick:()=>C(!0),children:"☰"}),(0,s.jsxs)(i(),{href:"/dashboard",className:"flex items-center gap-2",children:[(0,s.jsx)(u.A,{className:"h-6 w-6 text-blue-700"}),(0,s.jsx)("span",{className:"text-xl font-bold text-blue-900",children:"My Budget"})]}),(0,s.jsxs)("div",{className:"relative",ref:o,children:[(0,s.jsxs)("div",{onClick:()=>v(e=>!e),className:"flex items-center gap-3 cursor-pointer",children:[(0,s.jsx)("img",{className:"w-8 h-8 rounded-full border border-blue-200",src:"https://flowbite.com/docs/images/people/profile-picture-5.jpg",alt:"User"}),(0,s.jsx)("span",{className:"text-sm font-medium text-blue-900 hidden sm:inline",children:A})]}),l&&(0,s.jsx)(c,{user:k?{name:I,email:k.email,profile:"https://flowbite.com/docs/images/people/profile-picture-5.jpg"}:void 0,onClose:()=>v(!1),onLogout:()=>{e((0,y.r)()),a("Logged out successfully!"),r.push("/"),v(!1)}})]})]})}),(0,s.jsx)(g.N,{children:S&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(f.P.div,{className:"fixed inset-0 bg-black bg-opacity-30 z-30 sm:hidden",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>C(!1)}),(0,s.jsx)(f.P.aside,{initial:{x:"-100%"},animate:{x:0},exit:{x:"-100%"},transition:{type:"tween",duration:.3},className:"fixed top-0 left-0 z-40 w-64 h-screen pt-14 bg-blue-50 border-r border-blue-100/80 shadow-sm sm:hidden",children:(0,s.jsxs)("div",{className:"relative h-full px-4 py-6 space-y-2",children:[(0,s.jsx)("button",{className:"absolute top-4 right-4 text-blue-900",onClick:()=>C(!1),children:"✕"}),(0,s.jsx)(b,{currentPath:t??"",onNavigate:()=>C(!1)})]})})]})}),(0,s.jsx)("aside",{className:"hidden sm:block fixed top-0 left-0 z-40 w-64 h-screen pt-14 bg-blue-50 border-r border-blue-100/80 shadow-sm",children:(0,s.jsxs)("div",{className:"h-full px-4 py-6 space-y-2",children:[(0,s.jsx)("button",{onClick:()=>w(e=>!e),className:"w-full flex items-center justify-start gap-2 px-4 py-2 mb-2 rounded-lg text-sm font-semibold text-blue-800 bg-blue-100 hover:bg-blue-200 transition",children:N?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(m.A,{className:"w-4 h-4"}),"Hide Menu"]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(x.A,{className:"w-4 h-4"}),"Show Menu"]})}),N&&(0,s.jsx)(b,{currentPath:t??""})]})})]})},N=({children:e})=>(0,s.jsxs)("div",{className:"flex min-h-screen",children:[(0,s.jsx)(v,{}),(0,s.jsx)("main",{className:"flex-1 pt-14 p-4 sm:pl-64 transition-all duration-300",children:e})]});function w({children:e}){(0,d.useRouter)(),(0,h.j)();let{user:t,loading:r,hasFetchedUser:o}=(0,p.G)(e=>e.auth),[a,l]=(0,n.useState)(!0);return a||r?(0,s.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-blue-600 mx-auto"}),(0,s.jsx)("p",{className:"mt-4 text-gray-600",children:"Loading..."})]})}):t?(0,s.jsx)(s.Fragment,{children:e}):null}function S({children:e}){return(0,s.jsx)(w,{children:(0,s.jsx)("div",{className:a().className,children:(0,s.jsx)(N,{children:e})})})}r(62949)},63144:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>s});let s=(0,r(12907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"E:\\\\Personal-Finance-Tracker-Frontend\\\\src\\\\app\\\\dashboard\\\\layout.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"E:\\Personal-Finance-Tracker-Frontend\\src\\app\\dashboard\\layout.tsx","default")},67074:(e,t,r)=>{"use strict";r.d(t,{A:()=>o});var s=r(37590);let o=()=>({showSuccess:e=>{s.Ay.success(e,{duration:3e3,position:"top-right",style:{background:"#10B981",color:"#fff",zIndex:9999}})},showError:e=>{s.Ay.error(e,{duration:4e3,position:"top-right",style:{background:"#EF4444",color:"#fff",zIndex:9999}})},showInfo:e=>{(0,s.Ay)(e,{duration:3e3,position:"top-right",style:{background:"#363636",color:"#fff",zIndex:9999}})}})},76809:(e,t,r)=>{"use strict";r.d(t,{A:()=>p});var s=r(60687),o=r(43210),a=r(27605),n=r(11860),l=r(26001),i=r(78272);let d=["Food","Transport","Rent","Entertainment","Other (Add your own)"],c=["Salary","Freelance","Investments","Other (Add your own)"],u=({type:e,value:t,customValue:r,setValue:o,setCustomValue:a,error:n,dropdownOpen:l,setDropdownOpen:u})=>{let m="expense"===e?"Expense Category":"Income Source";return(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("label",{className:"block font-medium mb-1",children:m}),(0,s.jsxs)("button",{type:"button",onClick:()=>u(!l),className:`w-full bg-white border cursor-pointer ${n?"border-red-500":"border-gray-300"} text-gray-700 font-medium rounded-lg text-sm px-4 py-2.5 flex items-center justify-between focus:outline-none focus:ring-2 focus:ring-blue-500`,children:["custom"===t?r||"Enter custom":t||`Select ${m}`,(0,s.jsx)(i.A,{className:"w-4 h-4 ml-2"})]}),l&&(0,s.jsx)("div",{className:"absolute z-20 mt-2 w-full bg-white border border-gray-200 rounded-lg shadow-md max-h-60 overflow-y-auto",children:(0,s.jsx)("ul",{className:"py-2 text-sm text-gray-700",children:("expense"===e?d:c).map(e=>(0,s.jsx)("li",{children:(0,s.jsx)("button",{type:"button",onClick:()=>{o("Other (Add your own)"===e?"custom":e),"Other (Add your own)"!==e&&a(""),u(!1)},className:" cursor-pointer w-full text-left px-4 py-2 hover:bg-gray-100",children:e})},e))})}),"custom"===t&&(0,s.jsx)("input",{type:"text",value:r,onChange:e=>a(e.target.value),placeholder:`Enter custom ${m.toLowerCase()}`,className:"mt-2 w-full border border-gray-300 rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"}),n&&(0,s.jsx)("p",{className:"text-sm text-red-600 mt-1",children:n})]})};var m=r(67074);let x=e=>/^[0-9a-fA-F]{24}$/.test(e.trim()),p=({onClose:e,onSubmit:t,mode:r,type:i,initialData:d})=>{let[c,p]=(0,o.useState)(""),[h,b]=(0,o.useState)(!1),{showSuccess:g,showError:f}=(0,m.A)(),{register:y,handleSubmit:j,watch:v,setValue:N,control:w,formState:{errors:S}}=(0,a.mN)({defaultValues:{amount:"",categoryId:"",date:(()=>{let e=new Date,t=e.getFullYear(),r=String(e.getMonth()+1).padStart(2,"0"),s=String(e.getDate()).padStart(2,"0");return`${t}-${r}-${s}`})(),description:"",paymentMethod:"cash"}});(0,o.useEffect)(()=>{if("edit"===r&&d){let e="";p(""),"expense"===i&&("string"==typeof d.expenseCategory?e=d.expenseCategory:"object"==typeof d.expenseCategory&&d.expenseCategory&&"_id"in d.expenseCategory?e=d.expenseCategory._id:d.customExpenseCategory&&(e="custom",p(d.customExpenseCategory))),"income"===i&&("string"==typeof d.incomeSource?e=d.incomeSource:"object"==typeof d.incomeSource&&d.incomeSource&&"_id"in d.incomeSource?e=d.incomeSource._id:d.customIncomeSource&&(e="custom",p(d.customIncomeSource))),N("amount",d.amount.toString()),N("categoryId",e||""),N("date",d.date.split("T")[0]),N("description",d.description||""),N("paymentMethod",d.paymentMethod)}},[r,d,i,N]);let C=v("categoryId");(0,o.useEffect)(()=>{"custom"!==C&&"edit"!==r&&p("")},[C,r]);let k=async s=>{let o,a=s.categoryId;"custom"===s.categoryId&&c.trim()&&(a=c.trim());let n=x(a),l=10===s.date.length?new Date(s.date).toISOString():s.date;o="income"===i?{amount:Number(s.amount),date:l,description:s.description,paymentMethod:s.paymentMethod,currency:"USD",type:"income",incomeSource:n?a:void 0,customIncomeSource:n?void 0:a}:{amount:Number(s.amount),date:l,description:s.description,paymentMethod:s.paymentMethod,currency:"USD",type:"expense",categoryId:n?a:void 0,customCategory:n?void 0:a};try{await t(o);let s="add"===r?"added":"updated",a=i.charAt(0).toUpperCase()+i.slice(1);g(`${a} ${s} successfully`),e()}catch(e){console.error("Error submitting transaction:",e),f("Something went wrong. Please try again.")}};return(0,s.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-opacity-40 backdrop-blur-sm bg-transparent",children:(0,s.jsxs)(l.P.div,{initial:{opacity:0,scale:.95,y:-20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:-20},transition:{duration:.25},className:"w-full max-w-2xl bg-white rounded-xl shadow-lg p-8 relative",children:[(0,s.jsx)("button",{onClick:e,className:"cursor-pointer absolute top-4 right-4 text-gray-600 hover:text-red-600",children:(0,s.jsx)(n.A,{className:"w-6 h-6"})}),(0,s.jsxs)("h2",{className:"text-2xl font-bold mb-6 text-gray-800",children:["add"===r?"Add":"Edit"," ","income"===i?"Income":"Expense"]}),(0,s.jsxs)("form",{onSubmit:j(k),children:[(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block font-medium mb-1",children:"Amount (₹)"}),(0,s.jsx)("input",{...y("amount",{required:"Amount is required",validate:e=>!!(!isNaN(Number(e))&&Number(e)>0)||"Amount must be a positive number"}),type:"number",className:`w-full border rounded-lg px-4 py-2 focus:outline-none ${S.amount?"border-red-500":"border-gray-300"}`,placeholder:"e.g. 1000"}),S.amount&&(0,s.jsx)("p",{className:"text-sm text-red-600 mt-1",children:S.amount.message})]}),(0,s.jsx)(a.xI,{control:w,name:"categoryId",rules:{required:"Category/Source is required"},render:({field:e})=>(0,s.jsx)(u,{type:i,value:e.value,customValue:c,setValue:t=>e.onChange(t),setCustomValue:p,error:S.categoryId?.message,dropdownOpen:h,setDropdownOpen:b})},`${r}-${i}-${d?._id||"new"}`),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block font-medium mb-1",children:"Date"}),(0,s.jsx)("input",{...y("date",{required:"Date is required",validate:e=>{let t=new Date(e),r=new Date;return r.setHours(0,0,0,0),!(t>r)||"Future dates are not allowed"}}),type:"date",max:new Date().toISOString().split("T")[0],className:`w-full border rounded-lg px-4 py-2 focus:outline-none ${S.date?"border-red-500":"border-gray-300"}`}),S.date&&(0,s.jsx)("p",{className:"text-sm text-red-600 mt-1",children:S.date.message})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block font-medium mb-1",children:"Payment Method"}),(0,s.jsxs)("select",{...y("paymentMethod"),className:"w-full border border-gray-300 rounded-lg px-4 py-2 focus:outline-none",children:[(0,s.jsx)("option",{value:"cash",children:"Cash"}),(0,s.jsx)("option",{value:"card",children:"Card"}),(0,s.jsx)("option",{value:"bank_transfer",children:"Bank Transfer"}),(0,s.jsx)("option",{value:"other",children:"Other"})]})]}),(0,s.jsxs)("div",{className:"md:col-span-2",children:[(0,s.jsx)("label",{className:"block font-medium mb-1",children:"Description"}),(0,s.jsx)("textarea",{...y("description"),rows:3,className:"w-full border border-gray-300 rounded-lg px-4 py-2 resize-none focus:outline-none",placeholder:"Optional"})]})]}),(0,s.jsxs)("div",{className:"mt-8 flex justify-end gap-4",children:[(0,s.jsx)("button",{type:"button",onClick:e,className:"px-5 py-2 rounded-lg bg-gray-300 hover:bg-gray-400 text-gray-800 font-medium transition cursor-pointer",children:"Cancel"}),(0,s.jsx)("button",{type:"submit",className:"px-6 py-2 rounded-lg bg-blue-600 hover:bg-blue-700 text-white font-semibold cursor-pointer transition",children:"add"===r?"Save":"Update"})]})]})]})})}},80224:(e,t,r)=>{"use strict";r.d(t,{G:()=>s});let s=r(54864).d4}};