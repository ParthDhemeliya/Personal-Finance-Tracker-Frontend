"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[252],{18927:(e,t,o)=>{o.d(t,{j:()=>r});let r=o(34540).wA},27366:(e,t,o)=>{o.d(t,{A:()=>n});var r=o(13568);let n=()=>({showSuccess:e=>{r.Ay.success(e,{duration:3e3,position:"top-right",style:{background:"#10B981",color:"#fff",zIndex:9999}})},showError:e=>{r.Ay.error(e,{duration:4e3,position:"top-right",style:{background:"#EF4444",color:"#fff",zIndex:9999}})},showInfo:e=>{(0,r.Ay)(e,{duration:3e3,position:"top-right",style:{background:"#363636",color:"#fff",zIndex:9999}})}})},57550:(e,t,o)=>{o.d(t,{A:()=>g});var r=o(95155),n=o(12115),a=o(62177),s=o(54416),c=o(76408),l=o(66474);let d=["Food","Transport","Rent","Entertainment","Other (Add your own)"],i=["Salary","Freelance","Investments","Other (Add your own)"],u=e=>{let{type:t,value:o,customValue:n,setValue:a,setCustomValue:s,error:c,dropdownOpen:u,setDropdownOpen:m}=e,p="expense"===t?"Expense Category":"Income Source";return(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("label",{className:"block font-medium mb-1",children:p}),(0,r.jsxs)("button",{type:"button",onClick:()=>m(!u),className:"w-full bg-white border cursor-pointer ".concat(c?"border-red-500":"border-gray-300"," text-gray-700 font-medium rounded-lg text-sm px-4 py-2.5 flex items-center justify-between focus:outline-none focus:ring-2 focus:ring-blue-500"),children:["custom"===o?n||"Enter custom":o||"Select ".concat(p),(0,r.jsx)(l.A,{className:"w-4 h-4 ml-2"})]}),u&&(0,r.jsx)("div",{className:"absolute z-20 mt-2 w-full bg-white border border-gray-200 rounded-lg shadow-md max-h-60 overflow-y-auto",children:(0,r.jsx)("ul",{className:"py-2 text-sm text-gray-700",children:("expense"===t?d:i).map(e=>(0,r.jsx)("li",{children:(0,r.jsx)("button",{type:"button",onClick:()=>{a("Other (Add your own)"===e?"custom":e),"Other (Add your own)"!==e&&s(""),m(!1)},className:" cursor-pointer w-full text-left px-4 py-2 hover:bg-gray-100",children:e})},e))})}),"custom"===o&&(0,r.jsx)("input",{type:"text",value:n,onChange:e=>s(e.target.value),placeholder:"Enter custom ".concat(p.toLowerCase()),className:"mt-2 w-full border border-gray-300 rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"}),c&&(0,r.jsx)("p",{className:"text-sm text-red-600 mt-1",children:c})]})};var m=o(27366);let p=e=>/^[0-9a-fA-F]{24}$/.test(e.trim()),g=e=>{let{onClose:t,onSubmit:o,mode:l,type:d,initialData:i}=e,[g,y]=(0,n.useState)(""),[x,h]=(0,n.useState)(!1),{showSuccess:b,showError:f}=(0,m.A)(),{register:j,handleSubmit:w,watch:v,setValue:N,control:S,formState:{errors:C}}=(0,a.mN)({defaultValues:{amount:"",categoryId:"",date:(()=>{let e=new Date,t=e.getFullYear(),o=String(e.getMonth()+1).padStart(2,"0"),r=String(e.getDate()).padStart(2,"0");return"".concat(t,"-").concat(o,"-").concat(r)})(),description:"",paymentMethod:"cash"}});(0,n.useEffect)(()=>{if("edit"===l&&i){let e="";y(""),"expense"===d&&("string"==typeof i.expenseCategory?e=i.expenseCategory:"object"==typeof i.expenseCategory&&i.expenseCategory&&"_id"in i.expenseCategory?e=i.expenseCategory._id:i.customExpenseCategory&&(e="custom",y(i.customExpenseCategory))),"income"===d&&("string"==typeof i.incomeSource?e=i.incomeSource:"object"==typeof i.incomeSource&&i.incomeSource&&"_id"in i.incomeSource?e=i.incomeSource._id:i.customIncomeSource&&(e="custom",y(i.customIncomeSource))),N("amount",i.amount.toString()),N("categoryId",e||""),N("date",i.date.split("T")[0]),N("description",i.description||""),N("paymentMethod",i.paymentMethod)}},[l,i,d,N]);let k=v("categoryId");(0,n.useEffect)(()=>{"custom"!==k&&"edit"!==l&&y("")},[k,l]);let A=async e=>{let r,n=e.categoryId;"custom"===e.categoryId&&g.trim()&&(n=g.trim());let a=p(n),s=10===e.date.length?new Date(e.date).toISOString():e.date;r="income"===d?{amount:Number(e.amount),date:s,description:e.description,paymentMethod:e.paymentMethod,currency:"USD",type:"income",incomeSource:a?n:void 0,customIncomeSource:a?void 0:n}:{amount:Number(e.amount),date:s,description:e.description,paymentMethod:e.paymentMethod,currency:"USD",type:"expense",categoryId:a?n:void 0,customCategory:a?void 0:n};try{await o(r);let e="add"===l?"added":"updated",n=d.charAt(0).toUpperCase()+d.slice(1);b("".concat(n," ").concat(e," successfully")),t()}catch(e){console.error("Error submitting transaction:",e),f("Something went wrong. Please try again.")}};return(0,r.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-opacity-40 backdrop-blur-sm bg-transparent",children:(0,r.jsxs)(c.P.div,{initial:{opacity:0,scale:.95,y:-20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:-20},transition:{duration:.25},className:"w-full max-w-2xl bg-white rounded-xl shadow-lg p-8 relative",children:[(0,r.jsx)("button",{onClick:t,className:"cursor-pointer absolute top-4 right-4 text-gray-600 hover:text-red-600",children:(0,r.jsx)(s.A,{className:"w-6 h-6"})}),(0,r.jsxs)("h2",{className:"text-2xl font-bold mb-6 text-gray-800",children:["add"===l?"Add":"Edit"," ","income"===d?"Income":"Expense"]}),(0,r.jsxs)("form",{onSubmit:w(A),children:[(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block font-medium mb-1",children:"Amount (â‚¹)"}),(0,r.jsx)("input",{...j("amount",{required:"Amount is required",validate:e=>!!(!isNaN(Number(e))&&Number(e)>0)||"Amount must be a positive number"}),type:"number",className:"w-full border rounded-lg px-4 py-2 focus:outline-none ".concat(C.amount?"border-red-500":"border-gray-300"),placeholder:"e.g. 1000"}),C.amount&&(0,r.jsx)("p",{className:"text-sm text-red-600 mt-1",children:C.amount.message})]}),(0,r.jsx)(a.xI,{control:S,name:"categoryId",rules:{required:"Category/Source is required"},render:e=>{var t;let{field:o}=e;return(0,r.jsx)(u,{type:d,value:o.value,customValue:g,setValue:e=>o.onChange(e),setCustomValue:y,error:null==(t=C.categoryId)?void 0:t.message,dropdownOpen:x,setDropdownOpen:h})}},"".concat(l,"-").concat(d,"-").concat((null==i?void 0:i._id)||"new")),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block font-medium mb-1",children:"Date"}),(0,r.jsx)("input",{...j("date",{required:"Date is required",validate:e=>{let t=new Date(e),o=new Date;return o.setHours(0,0,0,0),!(t>o)||"Future dates are not allowed"}}),type:"date",max:new Date().toISOString().split("T")[0],className:"w-full border rounded-lg px-4 py-2 focus:outline-none ".concat(C.date?"border-red-500":"border-gray-300")}),C.date&&(0,r.jsx)("p",{className:"text-sm text-red-600 mt-1",children:C.date.message})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block font-medium mb-1",children:"Payment Method"}),(0,r.jsxs)("select",{...j("paymentMethod"),className:"w-full border border-gray-300 rounded-lg px-4 py-2 focus:outline-none",children:[(0,r.jsx)("option",{value:"cash",children:"Cash"}),(0,r.jsx)("option",{value:"card",children:"Card"}),(0,r.jsx)("option",{value:"bank_transfer",children:"Bank Transfer"}),(0,r.jsx)("option",{value:"other",children:"Other"})]})]}),(0,r.jsxs)("div",{className:"md:col-span-2",children:[(0,r.jsx)("label",{className:"block font-medium mb-1",children:"Description"}),(0,r.jsx)("textarea",{...j("description"),rows:3,className:"w-full border border-gray-300 rounded-lg px-4 py-2 resize-none focus:outline-none",placeholder:"Optional"})]})]}),(0,r.jsxs)("div",{className:"mt-8 flex justify-end gap-4",children:[(0,r.jsx)("button",{type:"button",onClick:t,className:"px-5 py-2 rounded-lg bg-gray-300 hover:bg-gray-400 text-gray-800 font-medium transition cursor-pointer",children:"Cancel"}),(0,r.jsx)("button",{type:"submit",className:"px-6 py-2 rounded-lg bg-blue-600 hover:bg-blue-700 text-white font-semibold cursor-pointer transition",children:"add"===l?"Save":"Update"})]})]})]})})}},94872:(e,t,o)=>{o.d(t,{G:()=>r});let r=o(34540).d4},96592:(e,t,o)=>{o.d(t,{A:()=>r});let r=e=>{var t,o;return"object"==typeof e&&null!==e&&"response"in e&&"string"==typeof(null==(o=e.response)||null==(t=o.data)?void 0:t.message)?e.response.data.message:"An unknown error occurred"}},97829:(e,t,o)=>{o.d(t,{A:()=>a});let r=o(23464).A.create({headers:{"Content-Type":"application/json"}}),n=()=>{{let e="https://personal-finance-tracker-backend-kin7.onrender.com";return console.log("proceee",e),e?"".concat(e,"/api"):"/api"}};r.interceptors.request.use(e=>{e.baseURL=n();let t=localStorage.getItem("token");return t&&e.headers&&(e.headers.Authorization="Bearer ".concat(t)),e},e=>Promise.reject(e)),r.interceptors.response.use(e=>e,e=>{var t;if((null==(t=e.response)?void 0:t.status)===401){localStorage.removeItem("token");let e=window.location.pathname;window.location.href="/login?redirectTo=".concat(encodeURIComponent(e))}return Promise.reject(e)});let a=r}}]);