(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[520],{18927:(e,t,r)=>{"use strict";r.d(t,{j:()=>a});let a=r(34540).wA},19946:(e,t,r)=>{"use strict";r.d(t,{A:()=>u});var a=r(12115);let s=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),n=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,r)=>r?r.toUpperCase():t.toLowerCase()),l=e=>{let t=n(e);return t.charAt(0).toUpperCase()+t.slice(1)},o=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.filter((e,t,r)=>!!e&&""!==e.trim()&&r.indexOf(e)===t).join(" ").trim()},i=e=>{for(let t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0};var c={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let d=(0,a.forwardRef)((e,t)=>{let{color:r="currentColor",size:s=24,strokeWidth:n=2,absoluteStrokeWidth:l,className:d="",children:u,iconNode:m,...h}=e;return(0,a.createElement)("svg",{ref:t,...c,width:s,height:s,stroke:r,strokeWidth:l?24*Number(n)/Number(s):n,className:o("lucide",d),...!u&&!i(h)&&{"aria-hidden":"true"},...h},[...m.map(e=>{let[t,r]=e;return(0,a.createElement)(t,r)}),...Array.isArray(u)?u:[u]])}),u=(e,t)=>{let r=(0,a.forwardRef)((r,n)=>{let{className:i,...c}=r;return(0,a.createElement)(d,{ref:n,iconNode:t,className:o("lucide-".concat(s(l(e))),"lucide-".concat(e),i),...c})});return r.displayName=l(e),r}},27366:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});var a=r(13568);let s=()=>({showSuccess:e=>{a.Ay.success(e,{duration:3e3,position:"top-right",style:{background:"#10B981",color:"#fff",zIndex:9999}})},showError:e=>{a.Ay.error(e,{duration:4e3,position:"top-right",style:{background:"#EF4444",color:"#fff",zIndex:9999}})},showInfo:e=>{(0,a.Ay)(e,{duration:3e3,position:"top-right",style:{background:"#363636",color:"#fff",zIndex:9999}})}})},28883:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(19946).A)("mail",[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]])},32919:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(19946).A)("lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]])},35695:(e,t,r)=>{"use strict";var a=r(18999);r.o(a,"useParams")&&r.d(t,{useParams:function(){return a.useParams}}),r.o(a,"usePathname")&&r.d(t,{usePathname:function(){return a.usePathname}}),r.o(a,"useRouter")&&r.d(t,{useRouter:function(){return a.useRouter}}),r.o(a,"useSearchParams")&&r.d(t,{useSearchParams:function(){return a.useSearchParams}})},55868:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(19946).A)("dollar-sign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]])},69417:(e,t,r)=>{Promise.resolve().then(r.bind(r,80302))},80302:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>p});var a=r(95155),s=r(12115),n=r(35695),l=r(18927),o=r(82909),i=r(55868),c=r(28883),d=r(32919),u=r(19946);let m=(0,u.A)("eye-off",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]),h=(0,u.A)("eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);var g=r(27366);let p=()=>{let e=(0,n.useRouter)(),t=(0,l.j)(),{showSuccess:r,showError:u}=(0,g.A)(),[p,x]=(0,s.useState)(""),[f,y]=(0,s.useState)(""),[w,b]=(0,s.useState)(!1),[v,k]=(0,s.useState)({}),[j,N]=(0,s.useState)(!1),A=()=>{let e={};return p.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(p)||(e.email="Invalid email address."):e.email="Email is required.",f?f.length<6&&(e.password="Password must be at least 6 characters."):e.password="Password is required.",e},P=async a=>{a.preventDefault(),k({});let s=A();if(Object.keys(s).length>0)return void k(s);try{N(!0);let a=await t((0,o.Lx)({email:p,password:f,first_name:"",last_name:""}));if(o.Lx.fulfilled.match(a)){await t((0,o.im)()),r("Login successful! Welcome back!");let a=new URLSearchParams(window.location.search).get("redirectTo");e.push(a||"/dashboard")}else{var n,l;let e=a.payload;(null==e||null==(n=e.message)?void 0:n.toLowerCase().includes("invalid credentials"))?(u("Invalid email or password. Please try again."),k({general:"Invalid email or password. Please try again."})):(null==e||null==(l=e.message)?void 0:l.toLowerCase().includes("network"))?(u("Network error. Please check your connection and try again."),k({general:"Network error. Please check your connection and try again."})):(u((null==e?void 0:e.message)||"Login failed. Please try again."),k({general:(null==e?void 0:e.message)||"Login failed. Please try again."}))}}catch(e){u("Something went wrong. Please try again later."),k({general:"Something went wrong. Please try again later."})}finally{N(!1)}};return(0,a.jsx)("section",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 to-blue-100 px-4",children:(0,a.jsxs)("div",{className:"w-full max-w-md p-8 bg-white rounded-2xl shadow-lg border border-blue-100",children:[(0,a.jsxs)("div",{className:"flex items-center justify-center mb-6 text-2xl font-bold text-blue-900",children:[(0,a.jsx)(i.A,{className:"w-6 h-6 text-blue-600 mr-2"}),"My Budget"]}),(0,a.jsx)("h2",{className:"text-xl font-semibold text-center text-blue-800 mb-6",children:"Sign in to your account"}),v.general&&(0,a.jsx)("div",{className:"text-red-600 text-sm mb-4 text-center font-medium",children:v.general}),(0,a.jsxs)("form",{onSubmit:P,noValidate:!0,className:"space-y-4",children:[(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("div",{className:"absolute inset-y-0 left-3 flex items-center pointer-events-none",children:(0,a.jsx)(c.A,{className:"w-4 h-4 text-gray-400"})}),(0,a.jsx)("input",{type:"email",name:"email",placeholder:"Email",value:p,onChange:e=>{x(e.target.value),k(e=>({...e,email:""}))},className:"w-full pl-10 pr-4 py-2 rounded-lg border text-sm bg-white placeholder:text-gray-400 focus:outline-none focus:ring-2 ".concat(v.email?"border-red-500 focus:ring-red-300":"border-gray-300 focus:ring-blue-200"),"aria-invalid":!!v.email}),v.email&&(0,a.jsx)("p",{className:"text-red-500 text-xs mt-1",children:v.email})]}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("div",{className:"absolute inset-y-0 left-3 flex items-center pointer-events-none",children:(0,a.jsx)(d.A,{className:"w-4 h-4 text-gray-400"})}),(0,a.jsx)("input",{type:w?"text":"password",name:"password",placeholder:"Password",value:f,onChange:e=>{y(e.target.value),k(e=>({...e,password:""}))},className:"w-full pl-10 pr-10 py-2 rounded-lg border text-sm bg-white placeholder:text-gray-400 focus:outline-none focus:ring-2 ".concat(v.password?"border-red-500 focus:ring-red-300":"border-gray-300 focus:ring-blue-200"),"aria-invalid":!!v.password}),(0,a.jsx)("div",{className:"absolute inset-y-0 right-3 flex items-center cursor-pointer text-gray-400 hover:text-blue-600",onClick:()=>b(e=>!e),children:w?(0,a.jsx)(m,{className:"w-4 h-4"}):(0,a.jsx)(h,{className:"w-4 h-4"})}),v.password&&(0,a.jsx)("p",{className:"text-red-500 text-xs mt-1",children:v.password})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between text-sm text-gray-600",children:[(0,a.jsxs)("label",{className:"flex items-center gap-2",children:[(0,a.jsx)("input",{type:"checkbox",className:"w-4 h-4 rounded border-gray-300 text-blue-600 focus:ring-blue-500 cursor-pointer"}),"Remember me"]}),(0,a.jsx)("a",{href:"#",className:"text-blue-600 hover:underline",children:"Forgot password?"})]}),(0,a.jsx)("button",{type:"submit",disabled:j,className:"w-full bg-blue-600 hover:bg-blue-700 text-white py-2 rounded-lg text-sm font-semibold transition disabled:opacity-50",children:j?"Signing in...":"Sign in"}),(0,a.jsxs)("p",{className:"text-sm text-center text-gray-600",children:["Donâ€™t have an account?"," ",(0,a.jsx)("span",{onClick:()=>e.push("/signup"),className:"text-blue-600 hover:underline cursor-pointer font-medium",children:"Sign up"})]})]})]})})}},82909:(e,t,r)=>{"use strict";r.d(t,{DY:()=>o,Lx:()=>l,im:()=>i});var a=r(51990),s=r(97829),n=r(96592);let l=(0,a.zD)("auth/login",async(e,t)=>{let{email:r,password:a}=e;try{let{token:e,email:t,id:n}=(await s.A.post("/auth/login",{email:r,password:a})).data;return e&&localStorage.setItem("token",e),{token:e,email:t,id:n}}catch(e){return t.rejectWithValue((0,n.A)(e))}}),o=(0,a.zD)("auth/register",async(e,t)=>{let{first_name:r,last_name:a,email:l,password:o}=e;try{let e=await s.A.post("/auth/signup",{first_name:r,last_name:a,email:l,password:o});return localStorage.setItem("token",e.data.token),console.log("registerUser response.data:",e.data),e.data}catch(e){return t.rejectWithValue((0,n.A)(e))}}),i=(0,a.zD)("auth/fetchUser",async(e,t)=>{let{rejectWithValue:r}=t;try{let e=localStorage.getItem("token");if(console.log("fetchUser token:",e),!e)return r("No token found");let t=await s.A.get("/auth/user");return console.log("fetchUser response:",t.data),t.data}catch(e){return console.error("fetchUser error:",e),r((0,n.A)(e))}})},96592:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=e=>{var t,r;return"object"==typeof e&&null!==e&&"response"in e&&"string"==typeof(null==(r=e.response)||null==(t=r.data)?void 0:t.message)?e.response.data.message:"An unknown error occurred"}},97829:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});let a=r(23464).A.create({headers:{"Content-Type":"application/json"}}),s=()=>{{let e="https://personal-finance-tracker-backend-kin7.onrender.com";return console.log("proceee",e),e?"".concat(e,"/api"):"/api"}};a.interceptors.request.use(e=>{e.baseURL=s();let t=localStorage.getItem("token");return t&&e.headers&&(e.headers.Authorization="Bearer ".concat(t)),e},e=>Promise.reject(e)),a.interceptors.response.use(e=>e,e=>{var t;if((null==(t=e.response)?void 0:t.status)===401){localStorage.removeItem("token");let e=window.location.pathname;window.location.href="/login?redirectTo=".concat(encodeURIComponent(e))}return Promise.reject(e)});let n=a}},e=>{var t=t=>e(e.s=t);e.O(0,[533,441,684,358],()=>t(69417)),_N_E=e.O()}]);