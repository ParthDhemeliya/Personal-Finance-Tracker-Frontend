(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[879],{2997:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>p});var a=r(95155),s=r(12115),o=r(28883),n=r(32919);let l=(0,r(19946).A)("user",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);var i=r(55868),c=r(35695),d=r(18927),u=r(82909),m=r(76408),h=r(27366);let p=()=>{let e=(0,c.useRouter)(),t=(0,d.j)(),{showSuccess:r,showError:p}=(0,h.A)(),[f,y]=(0,s.useState)({first_name:"",last_name:"",email:"",password:"",confirmPassword:""}),[g,x]=(0,s.useState)({}),[w,b]=(0,s.useState)(!1),A=e=>{let{name:t,value:r}=e.target;y(e=>({...e,[t]:r})),x(e=>({...e,[t]:""}))},v=()=>{let e={};return f.first_name.trim()||(e.first_name="First name is required."),f.last_name.trim()||(e.last_name="Last name is required."),f.email.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(f.email)||(e.email="Invalid email address."):e.email="Email is required.",f.password?f.password.length<6&&(e.password="Password must be at least 6 characters."):e.password="Password is required.",f.confirmPassword?f.password!==f.confirmPassword&&(e.confirmPassword="Passwords do not match."):e.confirmPassword="Please confirm your password.",e},P=async a=>{a.preventDefault(),x({});let s=v();if(Object.keys(s).length>0)return void x(s);try{b(!0);let a=await t((0,u.DY)({first_name:f.first_name,last_name:f.last_name,email:f.email,password:f.password}));if(u.DY.fulfilled.match(a))r("Account created successfully! Welcome to My Budget!"),e.push("/dashboard");else{let e=a.payload;if((null==e?void 0:e.errors)&&Array.isArray(e.errors)){let t={};e.errors.forEach(e=>{t[e.field]=e.message}),x(t),p("Please fix the errors above.")}else(null==e?void 0:e.message)?e.message.toLowerCase().includes("user already exists")?(p("An account with this email already exists. Please login or use a different email."),x({email:"An account with this email already exists. Please login or use a different email."})):(p(e.message),x({general:e.message})):(p("An unexpected error occurred. Please try again."),x({general:"An unexpected error occurred. Please try again."}))}}catch(e){p("Network error. Please try again later."),x({general:"Network error. Please try again later."})}finally{b(!1)}},k=e=>"email"===e?(0,a.jsx)(o.A,{className:"w-4 h-4 text-gray-400"}):"password"===e||"confirmPassword"===e?(0,a.jsx)(n.A,{className:"w-4 h-4 text-gray-400"}):(0,a.jsx)(l,{className:"w-4 h-4 text-gray-400"});return(0,a.jsx)("section",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 to-blue-100 px-4",children:(0,a.jsxs)(m.P.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.4},className:"w-full max-w-md p-8 bg-white rounded-2xl shadow-lg border border-blue-100",children:[(0,a.jsxs)("div",{className:"flex items-center justify-center mb-6 text-2xl font-bold text-blue-900",children:[(0,a.jsx)(i.A,{className:"w-6 h-6 text-blue-600 mr-2"}),"My Budget"]}),(0,a.jsx)("h2",{className:"text-xl font-semibold text-center text-blue-800 mb-6",children:"Create an Account"}),g.general&&(0,a.jsx)("div",{className:"text-red-600 text-sm mb-4 text-center font-medium",children:g.general}),(0,a.jsxs)("form",{onSubmit:P,noValidate:!0,className:"space-y-4",children:[[{name:"first_name",type:"text",placeholder:"First Name"},{name:"last_name",type:"text",placeholder:"Last Name"},{name:"email",type:"email",placeholder:"Email"},{name:"password",type:"password",placeholder:"Password"},{name:"confirmPassword",type:"password",placeholder:"Confirm Password"}].map(e=>{let{name:t,type:r,placeholder:s}=e;return(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("div",{className:"absolute inset-y-0 left-3 flex items-center pointer-events-none",children:k(t)}),(0,a.jsx)("input",{type:r,name:t,placeholder:s,value:f[t],onChange:A,className:"w-full pl-10 pr-4 py-2 rounded-lg border text-sm bg-white placeholder:text-gray-400 focus:outline-none focus:ring-2 ".concat(g[t]?"border-red-500 focus:ring-red-300":"border-gray-300 focus:ring-blue-200"),"aria-invalid":!!g[t]}),g[t]&&(0,a.jsx)("p",{className:"text-red-500 text-xs mt-1",children:g[t]})]},t)}),(0,a.jsx)(m.P.button,{type:"submit",disabled:w,whileTap:{scale:.98},className:"w-full bg-blue-600 hover:bg-blue-700 text-white py-2 rounded-lg text-sm font-semibold transition disabled:opacity-50",children:w?"Creating...":"Create an Account"}),(0,a.jsxs)("p",{className:"text-sm text-center text-gray-600",children:["Already have an account?"," ",(0,a.jsx)("span",{onClick:()=>e.push("/login"),className:"text-blue-600 hover:underline cursor-pointer font-medium",children:"Login here"})]})]})]})})}},18927:(e,t,r)=>{"use strict";r.d(t,{j:()=>a});let a=r(34540).wA},27366:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});var a=r(13568);let s=()=>({showSuccess:e=>{a.Ay.success(e,{duration:3e3,position:"top-right",style:{background:"#10B981",color:"#fff",zIndex:9999}})},showError:e=>{a.Ay.error(e,{duration:4e3,position:"top-right",style:{background:"#EF4444",color:"#fff",zIndex:9999}})},showInfo:e=>{(0,a.Ay)(e,{duration:3e3,position:"top-right",style:{background:"#363636",color:"#fff",zIndex:9999}})}})},28883:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(19946).A)("mail",[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]])},32919:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(19946).A)("lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]])},35695:(e,t,r)=>{"use strict";var a=r(18999);r.o(a,"useParams")&&r.d(t,{useParams:function(){return a.useParams}}),r.o(a,"usePathname")&&r.d(t,{usePathname:function(){return a.usePathname}}),r.o(a,"useRouter")&&r.d(t,{useRouter:function(){return a.useRouter}}),r.o(a,"useSearchParams")&&r.d(t,{useSearchParams:function(){return a.useSearchParams}})},47294:(e,t,r)=>{Promise.resolve().then(r.bind(r,2997))},55868:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(19946).A)("dollar-sign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]])},82909:(e,t,r)=>{"use strict";r.d(t,{DY:()=>l,Lx:()=>n,im:()=>i});var a=r(51990),s=r(97829),o=r(96592);let n=(0,a.zD)("auth/login",async(e,t)=>{let{email:r,password:a}=e;try{let{token:e,email:t,id:o}=(await s.A.post("/auth/login",{email:r,password:a})).data;return e&&localStorage.setItem("token",e),{token:e,email:t,id:o}}catch(e){return t.rejectWithValue((0,o.A)(e))}}),l=(0,a.zD)("auth/register",async(e,t)=>{let{first_name:r,last_name:a,email:n,password:l}=e;try{let e=await s.A.post("/auth/signup",{first_name:r,last_name:a,email:n,password:l});return localStorage.setItem("token",e.data.token),console.log("registerUser response.data:",e.data),e.data}catch(e){return t.rejectWithValue((0,o.A)(e))}}),i=(0,a.zD)("auth/fetchUser",async(e,t)=>{let{rejectWithValue:r}=t;try{let e=localStorage.getItem("token");if(console.log("fetchUser token:",e),!e)return r("No token found");let t=await s.A.get("/auth/user");return console.log("fetchUser response:",t.data),t.data}catch(e){return console.error("fetchUser error:",e),r((0,o.A)(e))}})},96592:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=e=>{var t,r;return"object"==typeof e&&null!==e&&"response"in e&&"string"==typeof(null==(r=e.response)||null==(t=r.data)?void 0:t.message)?e.response.data.message:"An unknown error occurred"}},97829:(e,t,r)=>{"use strict";r.d(t,{A:()=>o});let a=r(23464).A.create({headers:{"Content-Type":"application/json"}}),s=()=>{{let e="https://personal-finance-tracker-backend-kin7.onrender.com";return console.log("proceee",e),e?"".concat(e,"/api"):"/api"}};a.interceptors.request.use(e=>{e.baseURL=s();let t=localStorage.getItem("token");return t&&e.headers&&(e.headers.Authorization="Bearer ".concat(t)),e},e=>Promise.reject(e)),a.interceptors.response.use(e=>e,e=>{var t;if((null==(t=e.response)?void 0:t.status)===401){localStorage.removeItem("token");let e=window.location.pathname;window.location.href="/login?redirectTo=".concat(encodeURIComponent(e))}return Promise.reject(e)});let o=a}},e=>{var t=t=>e(e.s=t);e.O(0,[533,165,441,684,358],()=>t(47294)),_N_E=e.O()}]);