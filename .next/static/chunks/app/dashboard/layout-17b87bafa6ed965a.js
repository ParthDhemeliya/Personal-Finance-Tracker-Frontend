(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[954],{18927:(e,t,r)=>{"use strict";r.d(t,{j:()=>n});let n=r(34540).wA},23821:(e,t,r)=>{Promise.resolve().then(r.bind(r,32292))},27366:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});var n=r(13568);let s=()=>({showSuccess:e=>{n.Ay.success(e,{duration:3e3,position:"top-right",style:{background:"#10B981",color:"#fff",zIndex:9999}})},showError:e=>{n.Ay.error(e,{duration:4e3,position:"top-right",style:{background:"#EF4444",color:"#fff",zIndex:9999}})},showInfo:e=>{(0,n.Ay)(e,{duration:3e3,position:"top-right",style:{background:"#363636",color:"#fff",zIndex:9999}})}})},32292:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>D});var n=r(95155),s=r(88672),l=r.n(s),a=r(12115),o=r(6874),i=r.n(o),d=r(35695);let c=e=>{let{onLogout:t,onClose:r,user:s}=e,l=(0,a.useRef)(null);return(0,n.jsxs)("div",{ref:l,className:"fixed right-0 mt-2 w-64  bg-blue-50 shadow-lg rounded-lg z-50 p-4",children:[(0,n.jsxs)("div",{className:"flex items-center space-x-3 mb-4",children:[(0,n.jsx)("img",{className:"w-12 h-12 rounded-full",src:(null==s?void 0:s.profile)||"https://flowbite.com/docs/images/people/profile-picture-5.jpg",alt:"User"}),(0,n.jsxs)("div",{children:[(0,n.jsx)("p",{className:"text-sm font-semibold text-blue-900",children:(null==s?void 0:s.name)||"Neil Sims"}),(0,n.jsx)("p",{className:"text-xs font-semibold text-blue-900",children:(null==s?void 0:s.email)||"neil@example.com"})]})]}),(0,n.jsxs)("div",{className:"flex justify-between space-x-2",children:[(0,n.jsx)("button",{onClick:t,className:"flex-1 py-1 text-sm bg-red-100 text-red-800 hover:bg-red-200 rounded-md hover:text-red-900 transition cursor-pointer font-semibold",children:"Logout"}),(0,n.jsx)("button",{onClick:r,className:"flex-1 py-1 text-sm bg-gray-200 hover:bg-gray-300 dark:bg-gray-700 dark:hover:bg-gray-600 text-gray-800 dark:text-white rounded-md",children:"Cancel"})]})]})};var u=r(55868),h=r(66474);let m=(0,r(19946).A)("chevron-right",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);var p=r(94872),f=r(18927);let x=e=>{let{currentPath:t,onNavigate:r}=e,s=e=>t===e,l={gray:{active:"bg-white text-blue-900 font-bold border border-blue-100",hover:"hover:bg-white hover:text-blue-900"},blue:{active:"bg-blue-100 text-blue-800 font-bold border border-blue-200",hover:"hover:bg-blue-100 hover:text-blue-800"},red:{active:"bg-red-100 text-red-800 font-bold border border-red-200",hover:"hover:bg-red-100 hover:text-red-800"}};return(0,n.jsx)(n.Fragment,{children:[{label:"Dashboard",path:"/dashboard",color:"gray"},{label:"Income",path:"/dashboard/income",color:"blue"},{label:"Expense",path:"/dashboard/expense",color:"red"}].map(e=>{let{label:t,path:a,color:o}=e,d=s(a),c=l[o];return(0,n.jsx)(i(),{href:a,onClick:r,className:"block px-4 py-2 rounded-lg text-sm font-medium transition-all ".concat(d?c.active+" scale-105 ring-2 ring-blue-200/40":"text-blue-900 ".concat(c.hover)),children:t},t)})})};var g=r(90869),b=r(82885),v=r(97494),y=r(80845),j=r(27351),w=r(51508);class k extends a.Component{getSnapshotBeforeUpdate(e){let t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent){let e=t.offsetParent,r=(0,j.s)(e)&&e.offsetWidth||0,n=this.props.sizeRef.current;n.height=t.offsetHeight||0,n.width=t.offsetWidth||0,n.top=t.offsetTop,n.left=t.offsetLeft,n.right=r-n.width-n.left}return null}componentDidUpdate(){}render(){return this.props.children}}function N(e){let{children:t,isPresent:r,anchorX:s,root:l}=e,o=(0,a.useId)(),i=(0,a.useRef)(null),d=(0,a.useRef)({width:0,height:0,top:0,left:0,right:0}),{nonce:c}=(0,a.useContext)(w.Q);return(0,a.useInsertionEffect)(()=>{let{width:e,height:t,top:n,left:a,right:u}=d.current;if(r||!i.current||!e||!t)return;i.current.dataset.motionPopId=o;let h=document.createElement("style");c&&(h.nonce=c);let m=null!=l?l:document.head;return m.appendChild(h),h.sheet&&h.sheet.insertRule('\n          [data-motion-pop-id="'.concat(o,'"] {\n            position: absolute !important;\n            width: ').concat(e,"px !important;\n            height: ").concat(t,"px !important;\n            ").concat("left"===s?"left: ".concat(a):"right: ".concat(u),"px !important;\n            top: ").concat(n,"px !important;\n          }\n        ")),()=>{m.removeChild(h),m.contains(h)&&m.removeChild(h)}},[r]),(0,n.jsx)(k,{isPresent:r,childRef:i,sizeRef:d,children:a.cloneElement(t,{ref:i})})}let C=e=>{let{children:t,initial:r,isPresent:s,onExitComplete:l,custom:o,presenceAffectsLayout:i,mode:d,anchorX:c,root:u}=e,h=(0,b.M)(A),m=(0,a.useId)(),p=!0,f=(0,a.useMemo)(()=>(p=!1,{id:m,initial:r,isPresent:s,custom:o,onExitComplete:e=>{for(let t of(h.set(e,!0),h.values()))if(!t)return;l&&l()},register:e=>(h.set(e,!1),()=>h.delete(e))}),[s,h,l]);return i&&p&&(f={...f}),(0,a.useMemo)(()=>{h.forEach((e,t)=>h.set(t,!1))},[s]),a.useEffect(()=>{s||h.size||!l||l()},[s]),"popLayout"===d&&(t=(0,n.jsx)(N,{isPresent:s,anchorX:c,root:u,children:t})),(0,n.jsx)(y.t.Provider,{value:f,children:t})};function A(){return new Map}var _=r(32082);let I=e=>e.key||"";function E(e){let t=[];return a.Children.forEach(e,e=>{(0,a.isValidElement)(e)&&t.push(e)}),t}let R=e=>{let{children:t,custom:r,initial:s=!0,onExitComplete:l,presenceAffectsLayout:o=!0,mode:i="sync",propagate:d=!1,anchorX:c="left",root:u}=e,[h,m]=(0,_.xQ)(d),p=(0,a.useMemo)(()=>E(t),[t]),f=d&&!h?[]:p.map(I),x=(0,a.useRef)(!0),y=(0,a.useRef)(p),j=(0,b.M)(()=>new Map),[w,k]=(0,a.useState)(p),[N,A]=(0,a.useState)(p);(0,v.E)(()=>{x.current=!1,y.current=p;for(let e=0;e<N.length;e++){let t=I(N[e]);f.includes(t)?j.delete(t):!0!==j.get(t)&&j.set(t,!1)}},[N,f.length,f.join("-")]);let R=[];if(p!==w){let e=[...p];for(let t=0;t<N.length;t++){let r=N[t],n=I(r);f.includes(n)||(e.splice(t,0,r),R.push(r))}return"wait"===i&&R.length&&(e=R),A(E(e)),k(p),null}let{forceRender:S}=(0,a.useContext)(g.L);return(0,n.jsx)(n.Fragment,{children:N.map(e=>{let t=I(e),a=(!d||!!h)&&(p===N||f.includes(t));return(0,n.jsx)(C,{isPresent:a,initial:(!x.current||!!s)&&void 0,custom:r,presenceAffectsLayout:o,mode:i,root:u,onExitComplete:a?void 0:()=>{if(!j.has(t))return;j.set(t,!0);let e=!0;j.forEach(t=>{t||(e=!1)}),e&&(null==S||S(),A(y.current),d&&(null==m||m()),l&&l())},anchorX:c,children:e},t)})})};var S=r(76408),P=r(37375),U=r(27366);let z=()=>{var e,t;let r=(0,f.j)(),s=(0,d.usePathname)(),l=(0,d.useRouter)(),o=(0,a.useRef)(null),{showSuccess:g}=(0,U.A)(),[b,v]=(0,a.useState)(!1),[y,j]=(0,a.useState)(!0),[w,k]=(0,a.useState)(!1),N=(0,p.G)(e=>e.auth.user),C=null==N?void 0:N.first_name,A="".concat(null!=(e=null==N?void 0:N.first_name)?e:""," ").concat(null!=(t=null==N?void 0:N.last_name)?t:"");return(0,a.useEffect)(()=>{let e=e=>{o.current&&!o.current.contains(e.target)&&v(!1)};return b&&document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[b]),(0,n.jsxs)("div",{children:[(0,n.jsx)("nav",{className:"fixed top-0 left-0 w-full z-50 bg-blue-50 border-b border-blue-100/80",children:(0,n.jsxs)("div",{className:"h-14 px-6 flex items-center justify-between",children:[(0,n.jsx)("button",{className:"sm:hidden text-blue-800",onClick:()=>k(!0),children:"☰"}),(0,n.jsxs)(i(),{href:"/dashboard",className:"flex items-center gap-2",children:[(0,n.jsx)(u.A,{className:"h-6 w-6 text-blue-700"}),(0,n.jsx)("span",{className:"text-xl font-bold text-blue-900",children:"My Budget"})]}),(0,n.jsxs)("div",{className:"relative",ref:o,children:[(0,n.jsxs)("div",{onClick:()=>v(e=>!e),className:"flex items-center gap-3 cursor-pointer",children:[(0,n.jsx)("img",{className:"w-8 h-8 rounded-full border border-blue-200",src:"https://flowbite.com/docs/images/people/profile-picture-5.jpg",alt:"User"}),(0,n.jsx)("span",{className:"text-sm font-medium text-blue-900 hidden sm:inline",children:C})]}),b&&(0,n.jsx)(c,{user:N?{name:A,email:N.email,profile:"https://flowbite.com/docs/images/people/profile-picture-5.jpg"}:void 0,onClose:()=>v(!1),onLogout:()=>{r((0,P.r)()),g("Logged out successfully!"),l.push("/"),v(!1)}})]})]})}),(0,n.jsx)(R,{children:w&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(S.P.div,{className:"fixed inset-0 bg-black bg-opacity-30 z-30 sm:hidden",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>k(!1)}),(0,n.jsx)(S.P.aside,{initial:{x:"-100%"},animate:{x:0},exit:{x:"-100%"},transition:{type:"tween",duration:.3},className:"fixed top-0 left-0 z-40 w-64 h-screen pt-14 bg-blue-50 border-r border-blue-100/80 shadow-sm sm:hidden",children:(0,n.jsxs)("div",{className:"relative h-full px-4 py-6 space-y-2",children:[(0,n.jsx)("button",{className:"absolute top-4 right-4 text-blue-900",onClick:()=>k(!1),children:"✕"}),(0,n.jsx)(x,{currentPath:null!=s?s:"",onNavigate:()=>k(!1)})]})})]})}),(0,n.jsx)("aside",{className:"hidden sm:block fixed top-0 left-0 z-40 w-64 h-screen pt-14 bg-blue-50 border-r border-blue-100/80 shadow-sm",children:(0,n.jsxs)("div",{className:"h-full px-4 py-6 space-y-2",children:[(0,n.jsx)("button",{onClick:()=>j(e=>!e),className:"w-full flex items-center justify-start gap-2 px-4 py-2 mb-2 rounded-lg text-sm font-semibold text-blue-800 bg-blue-100 hover:bg-blue-200 transition",children:y?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(h.A,{className:"w-4 h-4"}),"Hide Menu"]}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(m,{className:"w-4 h-4"}),"Show Menu"]})}),y&&(0,n.jsx)(x,{currentPath:null!=s?s:""})]})})]})},F=e=>{let{children:t}=e;return(0,n.jsxs)("div",{className:"flex min-h-screen",children:[(0,n.jsx)(z,{}),(0,n.jsx)("main",{className:"flex-1 pt-14 p-4 sm:pl-64 transition-all duration-300",children:t})]})};var L=r(82909);function M(e){let{children:t}=e,r=(0,d.useRouter)(),s=(0,f.j)(),{user:l,loading:o,hasFetchedUser:i}=(0,p.G)(e=>e.auth),[c,u]=(0,a.useState)(!0);return((0,a.useEffect)(()=>{(async()=>{let e=localStorage.getItem("token");if(!e){let e=window.location.pathname;r.push("/login?redirectTo=".concat(encodeURIComponent(e)));return}if(e&&!l&&!i)try{await s((0,L.im)()).unwrap()}catch(t){localStorage.removeItem("token");let e=window.location.pathname;r.push("/login?redirectTo=".concat(encodeURIComponent(e)));return}u(!1)})()},[s,r,l,i]),c||o)?(0,n.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,n.jsxs)("div",{className:"text-center",children:[(0,n.jsx)("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-blue-600 mx-auto"}),(0,n.jsx)("p",{className:"mt-4 text-gray-600",children:"Loading..."})]})}):l?(0,n.jsx)(n.Fragment,{children:t}):null}function D(e){let{children:t}=e;return(0,n.jsx)(M,{children:(0,n.jsx)("div",{className:l().className,children:(0,n.jsx)(F,{children:t})})})}},35695:(e,t,r)=>{"use strict";var n=r(18999);r.o(n,"usePathname")&&r.d(t,{usePathname:function(){return n.usePathname}}),r.o(n,"useRouter")&&r.d(t,{useRouter:function(){return n.useRouter}})},37375:(e,t,r)=>{"use strict";r.d(t,{A:()=>o,r:()=>a});var n=r(51990),s=r(82909);let l=(0,n.Z0)({name:"auth",initialState:{user:null,token:null,loading:!1,error:null,hasFetchedUser:!1},reducers:{logout:e=>{e.user=null,e.token=null,e.hasFetchedUser=!1,localStorage.removeItem("token")}},extraReducers:e=>{e.addCase(s.Lx.pending,e=>{e.loading=!0,e.error=null}).addCase(s.Lx.fulfilled,(e,t)=>{e.loading=!1,e.token=t.payload.token,e.user={id:t.payload.id,email:t.payload.email,first_name:"",last_name:""},e.hasFetchedUser=!1}).addCase(s.Lx.rejected,(e,t)=>{e.loading=!1,e.error=t.payload}).addCase(s.DY.pending,e=>{e.loading=!0,e.error=null}).addCase(s.DY.fulfilled,(e,t)=>{e.loading=!1,e.user={id:t.payload._id,email:t.payload.email,first_name:t.payload.first_name,last_name:t.payload.last_name},e.token=t.payload.token,e.hasFetchedUser=!0}).addCase(s.DY.rejected,(e,t)=>{e.loading=!1,e.error=t.payload}).addCase(s.im.pending,e=>{e.loading=!0}).addCase(s.im.fulfilled,(e,t)=>{e.loading=!1,e.user={id:t.payload._id,email:t.payload.email,first_name:t.payload.first_name,last_name:t.payload.last_name},e.hasFetchedUser=!0}).addCase(s.im.rejected,(e,t)=>{e.loading=!1,e.error=t.payload,e.hasFetchedUser=!0})}}),{logout:a}=l.actions,o=l.reducer},55868:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});let n=(0,r(19946).A)("dollar-sign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]])},66474:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});let n=(0,r(19946).A)("chevron-down",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]])},82909:(e,t,r)=>{"use strict";r.d(t,{DY:()=>o,Lx:()=>a,im:()=>i});var n=r(51990),s=r(97829),l=r(96592);let a=(0,n.zD)("auth/login",async(e,t)=>{let{email:r,password:n}=e;try{let{token:e,email:t,id:l}=(await s.A.post("/auth/login",{email:r,password:n})).data;return e&&localStorage.setItem("token",e),{token:e,email:t,id:l}}catch(e){return t.rejectWithValue((0,l.A)(e))}}),o=(0,n.zD)("auth/register",async(e,t)=>{let{first_name:r,last_name:n,email:a,password:o}=e;try{let e=await s.A.post("/auth/signup",{first_name:r,last_name:n,email:a,password:o});return localStorage.setItem("token",e.data.token),console.log("registerUser response.data:",e.data),e.data}catch(e){return t.rejectWithValue((0,l.A)(e))}}),i=(0,n.zD)("auth/fetchUser",async(e,t)=>{let{rejectWithValue:r}=t;try{let e=localStorage.getItem("token");if(console.log("fetchUser token:",e),!e)return r("No token found");let t=await s.A.get("/auth/user");return console.log("fetchUser response:",t.data),t.data}catch(e){return console.error("fetchUser error:",e),r((0,l.A)(e))}})},88672:e=>{e.exports={style:{fontFamily:"'Inter', 'Inter Fallback'",fontStyle:"normal"},className:"__className_e8ce0c"}},94872:(e,t,r)=>{"use strict";r.d(t,{G:()=>n});let n=r(34540).d4},96592:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});let n=e=>{var t,r;return"object"==typeof e&&null!==e&&"response"in e&&"string"==typeof(null==(r=e.response)||null==(t=r.data)?void 0:t.message)?e.response.data.message:"An unknown error occurred"}},97829:(e,t,r)=>{"use strict";r.d(t,{A:()=>l});let n=r(23464).A.create({headers:{"Content-Type":"application/json"}}),s=()=>{{let e="https://personal-finance-tracker-backend-kin7.onrender.com";return console.log("proceee",e),e?"".concat(e,"/api"):"/api"}};n.interceptors.request.use(e=>{e.baseURL=s();let t=localStorage.getItem("token");return t&&e.headers&&(e.headers.Authorization="Bearer ".concat(t)),e},e=>Promise.reject(e)),n.interceptors.response.use(e=>e,e=>{var t;if((null==(t=e.response)?void 0:t.status)===401){localStorage.removeItem("token");let e=window.location.pathname;window.location.href="/login?redirectTo=".concat(encodeURIComponent(e))}return Promise.reject(e)});let l=n}},e=>{var t=t=>e(e.s=t);e.O(0,[949,533,165,874,441,684,358],()=>t(23821)),_N_E=e.O()}]);