(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[954],{18927:(e,t,r)=>{"use strict";r.d(t,{j:()=>s});let s=r(34540).wA},23821:(e,t,r)=>{Promise.resolve().then(r.bind(r,32292))},27366:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});var s=r(13568);let n=()=>({showSuccess:e=>{s.Ay.success(e,{duration:3e3,position:"top-right",style:{background:"#10B981",color:"#fff",zIndex:9999}})},showError:e=>{s.Ay.error(e,{duration:4e3,position:"top-right",style:{background:"#EF4444",color:"#fff",zIndex:9999}})},showInfo:e=>{(0,s.Ay)(e,{duration:3e3,position:"top-right",style:{background:"#363636",color:"#fff",zIndex:9999}})}})},32292:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>D});var s=r(95155),n=r(88672),a=r.n(n),l=r(12115),o=r(6874),i=r.n(o),d=r(35695);let c=e=>{let{onLogout:t,onClose:r,user:n}=e,a=(0,l.useRef)(null);return(0,s.jsxs)("div",{ref:a,className:"fixed right-0 mt-2 w-64  bg-blue-50 shadow-lg rounded-lg z-50 p-4",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-3 mb-4",children:[(0,s.jsx)("img",{className:"w-12 h-12 rounded-full",src:(null==n?void 0:n.profile)||"https://flowbite.com/docs/images/people/profile-picture-5.jpg",alt:"User"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm font-semibold text-blue-900",children:(null==n?void 0:n.name)||"Neil Sims"}),(0,s.jsx)("p",{className:"text-xs font-semibold text-blue-900",children:(null==n?void 0:n.email)||"neil@example.com"})]})]}),(0,s.jsxs)("div",{className:"flex justify-between space-x-2",children:[(0,s.jsx)("button",{onClick:t,className:"flex-1 py-1 text-sm bg-red-100 text-red-800 hover:bg-red-200 rounded-md hover:text-red-900 transition cursor-pointer font-semibold",children:"Logout"}),(0,s.jsx)("button",{onClick:r,className:"flex-1 py-1 text-sm bg-gray-200 hover:bg-gray-300 dark:bg-gray-700 dark:hover:bg-gray-600 text-gray-800 dark:text-white rounded-md",children:"Cancel"})]})]})};var u=r(55868),h=r(66474);let m=(0,r(19946).A)("chevron-right",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);var p=r(94872),f=r(18927);let x=e=>{let{currentPath:t,onNavigate:r}=e,n=e=>t===e,a={gray:{active:"bg-white text-blue-900 font-bold border border-blue-100",hover:"hover:bg-white hover:text-blue-900"},blue:{active:"bg-blue-100 text-blue-800 font-bold border border-blue-200",hover:"hover:bg-blue-100 hover:text-blue-800"},red:{active:"bg-red-100 text-red-800 font-bold border border-red-200",hover:"hover:bg-red-100 hover:text-red-800"}};return(0,s.jsx)(s.Fragment,{children:[{label:"Dashboard",path:"/dashboard",color:"gray"},{label:"Income",path:"/dashboard/income",color:"blue"},{label:"Expense",path:"/dashboard/expense",color:"red"}].map(e=>{let{label:t,path:l,color:o}=e,d=n(l),c=a[o];return(0,s.jsx)(i(),{href:l,onClick:r,className:"block px-4 py-2 rounded-lg text-sm font-medium transition-all ".concat(d?c.active+" scale-105 ring-2 ring-blue-200/40":"text-blue-900 ".concat(c.hover)),children:t},t)})})};var g=r(90869),b=r(82885),v=r(97494),y=r(80845),j=r(27351),w=r(51508);class k extends l.Component{getSnapshotBeforeUpdate(e){let t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent){let e=t.offsetParent,r=(0,j.s)(e)&&e.offsetWidth||0,s=this.props.sizeRef.current;s.height=t.offsetHeight||0,s.width=t.offsetWidth||0,s.top=t.offsetTop,s.left=t.offsetLeft,s.right=r-s.width-s.left}return null}componentDidUpdate(){}render(){return this.props.children}}function N(e){let{children:t,isPresent:r,anchorX:n,root:a}=e,o=(0,l.useId)(),i=(0,l.useRef)(null),d=(0,l.useRef)({width:0,height:0,top:0,left:0,right:0}),{nonce:c}=(0,l.useContext)(w.Q);return(0,l.useInsertionEffect)(()=>{let{width:e,height:t,top:s,left:l,right:u}=d.current;if(r||!i.current||!e||!t)return;i.current.dataset.motionPopId=o;let h=document.createElement("style");c&&(h.nonce=c);let m=null!=a?a:document.head;return m.appendChild(h),h.sheet&&h.sheet.insertRule('\n          [data-motion-pop-id="'.concat(o,'"] {\n            position: absolute !important;\n            width: ').concat(e,"px !important;\n            height: ").concat(t,"px !important;\n            ").concat("left"===n?"left: ".concat(l):"right: ".concat(u),"px !important;\n            top: ").concat(s,"px !important;\n          }\n        ")),()=>{m.removeChild(h),m.contains(h)&&m.removeChild(h)}},[r]),(0,s.jsx)(k,{isPresent:r,childRef:i,sizeRef:d,children:l.cloneElement(t,{ref:i})})}let C=e=>{let{children:t,initial:r,isPresent:n,onExitComplete:a,custom:o,presenceAffectsLayout:i,mode:d,anchorX:c,root:u}=e,h=(0,b.M)(A),m=(0,l.useId)(),p=!0,f=(0,l.useMemo)(()=>(p=!1,{id:m,initial:r,isPresent:n,custom:o,onExitComplete:e=>{for(let t of(h.set(e,!0),h.values()))if(!t)return;a&&a()},register:e=>(h.set(e,!1),()=>h.delete(e))}),[n,h,a]);return i&&p&&(f={...f}),(0,l.useMemo)(()=>{h.forEach((e,t)=>h.set(t,!1))},[n]),l.useEffect(()=>{n||h.size||!a||a()},[n]),"popLayout"===d&&(t=(0,s.jsx)(N,{isPresent:n,anchorX:c,root:u,children:t})),(0,s.jsx)(y.t.Provider,{value:f,children:t})};function A(){return new Map}var P=r(32082);let _=e=>e.key||"";function S(e){let t=[];return l.Children.forEach(e,e=>{(0,l.isValidElement)(e)&&t.push(e)}),t}let I=e=>{let{children:t,custom:r,initial:n=!0,onExitComplete:a,presenceAffectsLayout:o=!0,mode:i="sync",propagate:d=!1,anchorX:c="left",root:u}=e,[h,m]=(0,P.xQ)(d),p=(0,l.useMemo)(()=>S(t),[t]),f=d&&!h?[]:p.map(_),x=(0,l.useRef)(!0),y=(0,l.useRef)(p),j=(0,b.M)(()=>new Map),[w,k]=(0,l.useState)(p),[N,A]=(0,l.useState)(p);(0,v.E)(()=>{x.current=!1,y.current=p;for(let e=0;e<N.length;e++){let t=_(N[e]);f.includes(t)?j.delete(t):!0!==j.get(t)&&j.set(t,!1)}},[N,f.length,f.join("-")]);let I=[];if(p!==w){let e=[...p];for(let t=0;t<N.length;t++){let r=N[t],s=_(r);f.includes(s)||(e.splice(t,0,r),I.push(r))}return"wait"===i&&I.length&&(e=I),A(S(e)),k(p),null}let{forceRender:E}=(0,l.useContext)(g.L);return(0,s.jsx)(s.Fragment,{children:N.map(e=>{let t=_(e),l=(!d||!!h)&&(p===N||f.includes(t));return(0,s.jsx)(C,{isPresent:l,initial:(!x.current||!!n)&&void 0,custom:r,presenceAffectsLayout:o,mode:i,root:u,onExitComplete:l?void 0:()=>{if(!j.has(t))return;j.set(t,!0);let e=!0;j.forEach(t=>{t||(e=!1)}),e&&(null==E||E(),A(y.current),d&&(null==m||m()),a&&a())},anchorX:c,children:e},t)})})};var E=r(76408),R=r(37375),U=r(27366);let z=()=>{var e,t;let r=(0,f.j)(),n=(0,d.usePathname)(),a=(0,d.useRouter)(),o=(0,l.useRef)(null),{showSuccess:g}=(0,U.A)(),[b,v]=(0,l.useState)(!1),[y,j]=(0,l.useState)(!0),[w,k]=(0,l.useState)(!1),N=(0,p.G)(e=>e.auth.user),C=null==N?void 0:N.first_name,A="".concat(null!=(e=null==N?void 0:N.first_name)?e:""," ").concat(null!=(t=null==N?void 0:N.last_name)?t:"");return(0,l.useEffect)(()=>{let e=e=>{o.current&&!o.current.contains(e.target)&&v(!1)};return b&&document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[b]),(0,s.jsxs)("div",{children:[(0,s.jsx)("nav",{className:"fixed top-0 left-0 w-full z-50 bg-blue-50 border-b border-blue-100/80",children:(0,s.jsxs)("div",{className:"h-14 px-6 flex items-center justify-between",children:[(0,s.jsx)("button",{className:"sm:hidden text-blue-800",onClick:()=>k(!0),children:"☰"}),(0,s.jsxs)(i(),{href:"/dashboard",className:"flex items-center gap-2",children:[(0,s.jsx)(u.A,{className:"h-6 w-6 text-blue-700"}),(0,s.jsx)("span",{className:"text-xl font-bold text-blue-900",children:"My Budget"})]}),(0,s.jsxs)("div",{className:"relative",ref:o,children:[(0,s.jsxs)("div",{onClick:()=>v(e=>!e),className:"flex items-center gap-3 cursor-pointer",children:[(0,s.jsx)("img",{className:"w-8 h-8 rounded-full border border-blue-200",src:"https://flowbite.com/docs/images/people/profile-picture-5.jpg",alt:"User"}),(0,s.jsx)("span",{className:"text-sm font-medium text-blue-900 hidden sm:inline",children:C})]}),b&&(0,s.jsx)(c,{user:N?{name:A,email:N.email,profile:"https://flowbite.com/docs/images/people/profile-picture-5.jpg"}:void 0,onClose:()=>v(!1),onLogout:()=>{r((0,R.r)()),g("Logged out successfully!"),a.push("/"),v(!1)}})]})]})}),(0,s.jsx)(I,{children:w&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(E.P.div,{className:"fixed inset-0 bg-black bg-opacity-30 z-30 sm:hidden",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>k(!1)}),(0,s.jsx)(E.P.aside,{initial:{x:"-100%"},animate:{x:0},exit:{x:"-100%"},transition:{type:"tween",duration:.3},className:"fixed top-0 left-0 z-40 w-64 h-screen pt-14 bg-blue-50 border-r border-blue-100/80 shadow-sm sm:hidden",children:(0,s.jsxs)("div",{className:"relative h-full px-4 py-6 space-y-2",children:[(0,s.jsx)("button",{className:"absolute top-4 right-4 text-blue-900",onClick:()=>k(!1),children:"✕"}),(0,s.jsx)(x,{currentPath:null!=n?n:"",onNavigate:()=>k(!1)})]})})]})}),(0,s.jsx)("aside",{className:"hidden sm:block fixed top-0 left-0 z-40 w-64 h-screen pt-14 bg-blue-50 border-r border-blue-100/80 shadow-sm",children:(0,s.jsxs)("div",{className:"h-full px-4 py-6 space-y-2",children:[(0,s.jsx)("button",{onClick:()=>j(e=>!e),className:"w-full flex items-center justify-start gap-2 px-4 py-2 mb-2 rounded-lg text-sm font-semibold text-blue-800 bg-blue-100 hover:bg-blue-200 transition",children:y?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(h.A,{className:"w-4 h-4"}),"Hide Menu"]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(m,{className:"w-4 h-4"}),"Show Menu"]})}),y&&(0,s.jsx)(x,{currentPath:null!=n?n:""})]})})]})},F=e=>{let{children:t}=e;return(0,s.jsxs)("div",{className:"flex min-h-screen",children:[(0,s.jsx)(z,{}),(0,s.jsx)("main",{className:"flex-1 pt-14 p-4 sm:pl-64 transition-all duration-300",children:t})]})};var L=r(82909);function M(e){let{children:t}=e,r=(0,d.useRouter)(),n=(0,f.j)(),{user:a,loading:o,hasFetchedUser:i}=(0,p.G)(e=>e.auth),[c,u]=(0,l.useState)(!0);return((0,l.useEffect)(()=>{(async()=>{let e=localStorage.getItem("token");if(!e){let e=window.location.pathname;r.push("/login?redirectTo=".concat(encodeURIComponent(e)));return}if(e&&!a&&!i)try{await n((0,L.im)()).unwrap()}catch(t){localStorage.removeItem("token");let e=window.location.pathname;r.push("/login?redirectTo=".concat(encodeURIComponent(e)));return}u(!1)})()},[n,r,a,i]),c||o)?(0,s.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-blue-600 mx-auto"}),(0,s.jsx)("p",{className:"mt-4 text-gray-600",children:"Loading..."})]})}):a?(0,s.jsx)(s.Fragment,{children:t}):null}function D(e){let{children:t}=e;return(0,s.jsx)(M,{children:(0,s.jsx)("div",{className:a().className,children:(0,s.jsx)(F,{children:t})})})}},35695:(e,t,r)=>{"use strict";var s=r(18999);r.o(s,"useParams")&&r.d(t,{useParams:function(){return s.useParams}}),r.o(s,"usePathname")&&r.d(t,{usePathname:function(){return s.usePathname}}),r.o(s,"useRouter")&&r.d(t,{useRouter:function(){return s.useRouter}}),r.o(s,"useSearchParams")&&r.d(t,{useSearchParams:function(){return s.useSearchParams}})},37375:(e,t,r)=>{"use strict";r.d(t,{A:()=>o,r:()=>l});var s=r(51990),n=r(82909);let a=(0,s.Z0)({name:"auth",initialState:{user:null,token:null,loading:!1,error:null,hasFetchedUser:!1},reducers:{logout:e=>{e.user=null,e.token=null,e.hasFetchedUser=!1,localStorage.removeItem("token")}},extraReducers:e=>{e.addCase(n.Lx.pending,e=>{e.loading=!0,e.error=null}).addCase(n.Lx.fulfilled,(e,t)=>{e.loading=!1,e.token=t.payload.token,e.user={id:t.payload.id,email:t.payload.email,first_name:"",last_name:""},e.hasFetchedUser=!1}).addCase(n.Lx.rejected,(e,t)=>{e.loading=!1,e.error=t.payload}).addCase(n.DY.pending,e=>{e.loading=!0,e.error=null}).addCase(n.DY.fulfilled,(e,t)=>{e.loading=!1,e.user={id:t.payload._id,email:t.payload.email,first_name:t.payload.first_name,last_name:t.payload.last_name},e.token=t.payload.token,e.hasFetchedUser=!0}).addCase(n.DY.rejected,(e,t)=>{e.loading=!1,e.error=t.payload}).addCase(n.im.pending,e=>{e.loading=!0}).addCase(n.im.fulfilled,(e,t)=>{e.loading=!1,e.user={id:t.payload._id,email:t.payload.email,first_name:t.payload.first_name,last_name:t.payload.last_name},e.hasFetchedUser=!0}).addCase(n.im.rejected,(e,t)=>{e.loading=!1,e.error=t.payload,e.hasFetchedUser=!0})}}),{logout:l}=a.actions,o=a.reducer},55868:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(19946).A)("dollar-sign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]])},66474:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(19946).A)("chevron-down",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]])},82909:(e,t,r)=>{"use strict";r.d(t,{DY:()=>o,Lx:()=>l,im:()=>i});var s=r(51990),n=r(97829),a=r(96592);let l=(0,s.zD)("auth/login",async(e,t)=>{let{email:r,password:s}=e;try{let{token:e,email:t,id:a}=(await n.A.post("/auth/login",{email:r,password:s})).data;return e&&localStorage.setItem("token",e),{token:e,email:t,id:a}}catch(e){return t.rejectWithValue((0,a.A)(e))}}),o=(0,s.zD)("auth/register",async(e,t)=>{let{first_name:r,last_name:s,email:l,password:o}=e;try{let e=await n.A.post("/auth/signup",{first_name:r,last_name:s,email:l,password:o});return localStorage.setItem("token",e.data.token),console.log("registerUser response.data:",e.data),e.data}catch(e){return t.rejectWithValue((0,a.A)(e))}}),i=(0,s.zD)("auth/fetchUser",async(e,t)=>{let{rejectWithValue:r}=t;try{let e=localStorage.getItem("token");if(console.log("fetchUser token:",e),!e)return r("No token found");let t=await n.A.get("/auth/user");return console.log("fetchUser response:",t.data),t.data}catch(e){return console.error("fetchUser error:",e),r((0,a.A)(e))}})},88672:e=>{e.exports={style:{fontFamily:"'Inter', 'Inter Fallback'",fontStyle:"normal"},className:"__className_e8ce0c"}},94872:(e,t,r)=>{"use strict";r.d(t,{G:()=>s});let s=r(34540).d4},96592:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=e=>{var t,r;return"object"==typeof e&&null!==e&&"response"in e&&"string"==typeof(null==(r=e.response)||null==(t=r.data)?void 0:t.message)?e.response.data.message:"An unknown error occurred"}},97829:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let s=r(23464).A.create({headers:{"Content-Type":"application/json"}}),n=()=>{{let e="https://personal-finance-tracker-backend-kin7.onrender.com";return console.log("proceee",e),e?"".concat(e,"/api"):"/api"}};s.interceptors.request.use(e=>{e.baseURL=n();let t=localStorage.getItem("token");return t&&e.headers&&(e.headers.Authorization="Bearer ".concat(t)),e},e=>Promise.reject(e)),s.interceptors.response.use(e=>e,e=>{var t;if((null==(t=e.response)?void 0:t.status)===401){localStorage.removeItem("token");let e=window.location.pathname;window.location.href="/login?redirectTo=".concat(encodeURIComponent(e))}return Promise.reject(e)});let a=s}},e=>{var t=t=>e(e.s=t);e.O(0,[949,533,165,874,441,684,358],()=>t(23821)),_N_E=e.O()}]);