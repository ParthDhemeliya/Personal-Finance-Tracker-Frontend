(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[413],{2315:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>p});var l=t(95155),r=t(39785),d=t(37475),n=t(12115),o=t(57550),i=t(27366),c=t(31986),s=t(55664),u=t(18927),m=t(94872),g=t(20099),h=t(4653);function p(){let e=(0,u.j)(),{data:a,currentPage:t,totalPages:p,loading:f,overallTotalIncome:y}=(0,m.G)(e=>e.income),[x,b]=(0,n.useState)(!1),[j,v]=(0,n.useState)(null);(0,n.useEffect)(()=>{e((0,g.Sf)({page:1,limit:8})),e((0,h.I)(1)),e((0,g.Ko)())},[e]);let{showSuccess:w,showError:A}=(0,i.A)(),C=async a=>{if("income"===a.type)try{j?await e((0,g.XU)({id:j._id,data:a})).unwrap():await e((0,g.B$)(a)).unwrap(),e((0,g.Sf)({page:1,limit:8})),e((0,h.I)(1)),e((0,g.Ko)()),b(!1),v(null)}catch(e){console.error("Add/Edit income failed:",e),A("Failed to save income. Please try again.")}},N=async a=>{try{await e((0,g.rJ)(a)).unwrap(),w("Income deleted successfully!"),e((0,g.Sf)({page:t,limit:8})),e((0,g.Ko)())}catch(e){console.error("Delete income failed:",e),A("Failed to delete income. Please try again.")}};return(0,l.jsx)("div",{className:"min-h-screen bg-gray-100 py-10 px-4",children:(0,l.jsxs)("div",{className:"max-w-7xl mx-auto bg-white p-8 rounded-2xl shadow-md border border-gray-200",children:[(0,l.jsxs)("div",{className:"flex justify-between items-center mb-10",children:[(0,l.jsxs)("div",{className:"flex items-center gap-3",children:[(0,l.jsx)(r.A,{className:"w-8 h-8 text-blue-600"}),(0,l.jsx)("h1",{className:"text-4xl font-extrabold text-gray-800",children:"Income Overview"})]}),(0,l.jsx)("button",{onClick:()=>{b(!0),v(null)},className:"px-5 py-2 rounded-lg bg-blue-100 text-blue-800 font-semibold border border-blue-200 hover:bg-blue-200 hover:text-blue-900 transition cursor-pointer",children:"+ Add Income"})]}),(0,l.jsxs)("div",{className:"mb-6 p-4 bg-blue-50 border border-blue-200 rounded-lg shadow-sm flex items-center gap-2",children:[(0,l.jsx)(d.A,{className:"text-blue-600 w-5 h-5"}),(0,l.jsxs)("h2",{className:"text-lg font-semibold text-gray-800",children:["Total Income:"," ",(0,l.jsx)("span",{className:"text-blue-700 font-bold",children:y.toLocaleString()})]})]}),f?(0,l.jsx)("p",{className:"text-center text-gray-500 italic",children:"Loading incomes..."}):(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(c.A,{data:a,type:"income",onDelete:N,onEdit:e=>{v(e),b(!0)}}),(0,l.jsx)(s.A,{page:t,totalPages:p,onPageChange:a=>{e((0,h.I)(a)),e((0,g.Sf)({page:a,limit:8}))}})]}),x&&(0,l.jsx)(o.A,{onClose:()=>{b(!1),v(null)},onSubmit:C,type:"income",mode:j?"edit":"add",initialData:j?{...j,type:"income"}:void 0})]})})}},4653:(e,a,t)=>{"use strict";t.d(a,{A:()=>o,I:()=>n});var l=t(51990),r=t(20099);let d=(0,l.Z0)({name:"income",initialState:{data:[],total:0,currentPage:1,totalPages:1,loading:!1,error:null,overallTotalIncome:0},reducers:{setPage(e,a){e.currentPage=a.payload}},extraReducers:e=>{e.addCase(r.Sf.pending,e=>{e.loading=!0,e.error=null}).addCase(r.Sf.fulfilled,(e,a)=>{e.loading=!1,e.data=a.payload.data,e.total=a.payload.total,e.totalPages=a.payload.totalPages,e.currentPage=a.payload.currentPage}).addCase(r.Sf.rejected,(e,a)=>{e.loading=!1,e.error=a.payload}).addCase(r.JO.pending,e=>{e.loading=!0,e.error=null}).addCase(r.JO.fulfilled,(e,a)=>{e.loading=!1,e.data=a.payload}).addCase(r.JO.rejected,(e,a)=>{e.loading=!1,e.error=a.payload}).addCase(r.B$.fulfilled,()=>{}).addCase(r.XU.fulfilled,(e,a)=>{let t=e.data.findIndex(e=>e._id===a.payload._id);-1!==t&&(e.data[t]=a.payload)}).addCase(r.rJ.fulfilled,()=>{}).addCase(r.Ko.fulfilled,(e,a)=>{e.overallTotalIncome=a.payload}).addCase(r.Ko.rejected,(e,a)=>{console.error("Failed to fetch total income:",a.payload)})}}),{setPage:n}=d.actions,o=d.reducer},20099:(e,a,t)=>{"use strict";t.d(a,{B$:()=>i,JO:()=>n,Ko:()=>u,Sf:()=>o,XU:()=>c,rJ:()=>s});var l=t(51990),r=t(97829),d=t(96592);let n=(0,l.zD)("income/fetchAll",async(e,a)=>{try{return(await r.A.get("/v1/incomes")).data}catch(e){return a.rejectWithValue((0,d.A)(e))}}),o=(0,l.zD)("income/fetchPaginated",async(e,a)=>{let{page:t,limit:l}=e;try{return(await r.A.get("/v1/incomes/paginated?page=".concat(t,"&limit=").concat(l))).data}catch(e){return a.rejectWithValue((0,d.A)(e))}}),i=(0,l.zD)("income/addIncome",async(e,a)=>{try{return(await r.A.post("/v1/incomes",e)).data}catch(e){return a.rejectWithValue((0,d.A)(e))}}),c=(0,l.zD)("income/update",async(e,a)=>{let{id:t,data:l}=e;try{return(await r.A.put("/v1/incomes/".concat(t),l)).data}catch(e){return a.rejectWithValue((0,d.A)(e))}}),s=(0,l.zD)("income/delete",async(e,a)=>{try{return await r.A.delete("/v1/incomes/".concat(e)),e}catch(e){return a.rejectWithValue((0,d.A)(e))}}),u=(0,l.zD)("income/fetchTotalIncome",async(e,a)=>{try{return(await r.A.get("/v1/incomes/total")).data.total}catch(e){return a.rejectWithValue((0,d.A)(e))}})},57873:(e,a,t)=>{Promise.resolve().then(t.bind(t,2315))}},e=>{var a=a=>e(e.s=a);e.O(0,[533,165,865,252,179,441,684,358],()=>a(57873)),_N_E=e.O()}]);