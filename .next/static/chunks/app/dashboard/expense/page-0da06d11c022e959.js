(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[470],{1061:(e,a,t)=>{"use strict";t.d(a,{A:()=>n,I:()=>r});var s=t(51990),d=t(68232);let l=(0,s.Z0)({name:"expenses",initialState:{data:[],loading:!1,error:null,total:0,page:1,totalPages:1,totalAmount:0,currentPage:1},reducers:{setPage:(e,a)=>{e.page=a.payload}},extraReducers:e=>{e.addCase(d.hF.pending,e=>{e.loading=!0,e.error=null}).addCase(d.hF.fulfilled,(e,a)=>{e.loading=!1,e.data=a.payload.data,e.total=a.payload.total,e.page=a.payload.currentPage,e.totalPages=a.payload.totalPages}).addCase(d.hF.rejected,(e,a)=>{e.loading=!1,e.error=a.payload}).addCase(d._f.fulfilled,(e,a)=>{e.totalAmount=a.payload}).addCase(d.k5.fulfilled,(e,a)=>{e.data.unshift(a.payload),e.total+=1}).addCase(d.eY.fulfilled,(e,a)=>{let t=e.data.findIndex(e=>e._id===a.payload._id);-1!==t&&(e.data[t]=a.payload)}).addCase(d.Wz.fulfilled,(e,a)=>{e.data=e.data.filter(e=>e._id!==a.payload),e.total-=1})}}),{setPage:r}=l.actions,n=l.reducer},39796:(e,a,t)=>{Promise.resolve().then(t.bind(t,55888))},55888:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>h});var s=t(95155),d=t(39785),l=t(12115),r=t(57550),n=t(31986),i=t(55664),o=t(18927),c=t(94872),p=t(68232),x=t(1061),u=t(27366);function h(){let e=(0,o.j)(),{data:a,page:t,totalPages:h,totalAmount:g,loading:y}=(0,c.G)(e=>e.expenses),{showSuccess:f,showError:m}=(0,u.A)(),[j,b]=(0,l.useState)(!1),[v,w]=(0,l.useState)(null);(0,l.useEffect)(()=>{e((0,p.hF)({page:t,limit:6})),e((0,p._f)())},[e,t]);let A=async a=>{if("expense"===a.type)try{v?await e((0,p.eY)({id:v._id,data:a})).unwrap():(await e((0,p.k5)(a)).unwrap(),e((0,x.I)(1))),e((0,p.hF)({page:1,limit:6})),e((0,p._f)()),b(!1),w(null)}catch(e){console.error("Add/update expense failed:",e),m("Failed to save expense. Please try again.")}},N=async a=>{try{await e((0,p.Wz)(a)).unwrap(),f("Expense deleted successfully!"),e((0,p.hF)({page:t,limit:6})),e((0,p._f)())}catch(e){console.error("Delete failed:",e),m("Failed to delete expense. Please try again.")}};return(0,s.jsx)("div",{className:"min-h-screen bg-gray-100 py-10 px-4",children:(0,s.jsxs)("div",{className:"max-w-7xl mx-auto bg-white p-8 rounded-2xl shadow-md border border-gray-200",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-8",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)(d.A,{className:"w-8 h-8 text-red-600"}),(0,s.jsx)("h1",{className:"text-4xl font-extrabold text-gray-800",children:"Expense Overview"})]}),(0,s.jsx)("button",{onClick:()=>{b(!0),w(null)},className:"px-5 py-2 rounded-lg bg-red-100 text-red-800 font-semibold border border-red-200 hover:bg-red-200 hover:text-red-900 transition cursor-pointer",children:"+ Add Expense"})]}),(0,s.jsxs)("div",{className:"mb-6 p-4 bg-red-50 border border-red-200 rounded-lg shadow-sm flex items-center gap-2",children:[(0,s.jsx)(d.A,{className:"text-red-600 w-5 h-5"}),(0,s.jsxs)("h2",{className:"text-lg font-semibold text-gray-800",children:["Total Expense:"," ",(0,s.jsxs)("span",{className:"text-red-700 font-bold",children:["â‚¹ ",g.toLocaleString()]})]})]}),y?(0,s.jsx)("p",{className:"text-center text-gray-500 italic",children:"Loading expenses..."}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.A,{data:a,type:"expense",onDelete:N,onEdit:e=>{w(e),b(!0)}}),(0,s.jsx)(i.A,{page:t,totalPages:h,onPageChange:a=>{e((0,x.I)(a))}})]}),j&&(0,s.jsx)(r.A,{onClose:()=>{b(!1),w(null)},onSubmit:A,type:"expense",mode:v?"edit":"add",initialData:v?{...v,type:"expense"}:void 0})]})})}},68232:(e,a,t)=>{"use strict";t.d(a,{Wz:()=>c,_f:()=>n,eY:()=>o,hF:()=>r,k5:()=>i});var s=t(51990),d=t(97829),l=t(96592);let r=(0,s.zD)("expenses/fetchPaginated",async(e,a)=>{let{page:t,limit:s}=e;try{return(await d.A.get("/v1/expenses/paginated?page=".concat(t,"&limit=").concat(s))).data}catch(e){return a.rejectWithValue((0,l.A)(e))}}),n=(0,s.zD)("expenses/fetchTotal",async(e,a)=>{try{return(await d.A.get("/v1/expenses/total")).data.total}catch(e){return a.rejectWithValue((0,l.A)(e))}}),i=(0,s.zD)("expenses/add",async(e,a)=>{try{return(await d.A.post("/v1/expenses",e)).data}catch(e){return a.rejectWithValue((0,l.A)(e))}}),o=(0,s.zD)("expenses/update",async(e,a)=>{let{id:t,data:s}=e;try{return(await d.A.put("/v1/expenses/".concat(t),s)).data}catch(e){return a.rejectWithValue((0,l.A)(e))}}),c=(0,s.zD)("expenses/delete",async(e,a)=>{try{return await d.A.delete("/v1/expenses/".concat(e)),e}catch(e){return a.rejectWithValue((0,l.A)(e))}})}},e=>{var a=a=>e(e.s=a);e.O(0,[533,165,865,252,179,441,684,358],()=>a(39796)),_N_E=e.O()}]);